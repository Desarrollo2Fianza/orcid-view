<form class="flex justify-center" [formGroup]="orcidForm" (ngSubmit)="onSubmit()">
    <div class="w-2/4">
        <div class="grid grid-cols-12">
            <div class="col-12 border-2">
                <h4 class="mb-2">Identificador Investigador:</h4>
                <input type="text" pInputText class="w-4/5 p-inputtext-sm mr-2" formControlName="orcid"/>
                
                <button pButton type="submit" 
                class="p-button-info p-button-sm align-bottom"
                label="Registrar Orcid" 
                [disabled]="!orcidForm.valid"></button>
            </div>
            <div *ngIf="orcid!.invalid && (orcid!.dirty || orcid!.touched)" class="ng-invalid ng-dirty">
               <div *ngIf="orcid!.errors?.['required']" class="p-error block">
                   Orcid es requerido
               </div>                    
           </div>
        </div>
    </div>
</form>

<div class="flex justify-center mt-4">
    <div class="w-3/4" *ngIf="listOrcid">
        <p-table [value]="listOrcid.data" [tableStyle]="{'min-width': '50rem'}">
            <ng-template pTemplate="header">
                <tr>
                    <th>Orcid</th>
                    <th>Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-orcid>
                <tr>
                    <td>{{orcid.orcid}}</td>
                    <td>{{orcid.name}}</td>
                    <td>{{orcid.last_name}}</td>
                    <td>{{orcid.principal_email ?? 'Without Email' }}</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

<div class="flex justify-end">
    <span class="p-buttonset" *ngIf="listOrcid">
        <ng-container *ngFor="let link of listOrcid.meta.links">
            <button pButton pRipple label="Save" [label]="link.label"></button>
        </ng-container>
    </span>
</div>
